{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap b19e229b366a15c10d31","webpack:///./src/index.js"],"names":["DragAndSwap","config","_name","isEnabled","undefined","dragSrcEl","boxes","_findElementsInThePage","enable","forEach","call","box","addEventListener","handleDragStart","e","handleDragEnter","handleDragOver","handleDragLeave","handleDrop","handleDragEnd","target","style","opacity","dataTransfer","effectAllowed","setData","innerHTML","preventDefault","dropEffect","_canDrop","classList","add","remove","stopPropagation","getData","oldClasses","toString","split","o","oldId","id","onChange","col","selector","containers","c","element","slice","document","querySelectorAll","setAttribute","cursor","removeAttribute","container","every","closest","el1","el2","c1","_findContainer","c2","_areDifferentElements","swapBetweenContainers","_hasSameContainers"],"mappings":"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","file":"DragAndSwap.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"DragAndSwap\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"DragAndSwap\"] = factory();\n\telse\n\t\troot[\"DragAndSwap\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap b19e229b366a15c10d31","export default class DragAndSwap {\n\n    constructor(config) {\n        this._name = 'DragAndSwap';\n\n        this.config = config || {};\n\n        this.isEnabled = config.isEnabled !== undefined ? config.isEnabled : true;\n        this.dragSrcEl = null;\n\n        this.boxes = [];\n\n        this._findElementsInThePage();\n\n        if (this.isEnabled) {\n            this.enable();\n        }\n        [].forEach.call(this.boxes, (box) => {\n            box.addEventListener('dragstart', e => this.handleDragStart(e), false);\n            box.addEventListener('dragenter', e => this.handleDragEnter(e), false);\n            box.addEventListener('dragover', e => this.handleDragOver(e), false);\n            box.addEventListener('dragleave', e => this.handleDragLeave(e), false);\n            box.addEventListener('drop', e => this.handleDrop(e), false);\n            box.addEventListener('dragend', e => this.handleDragEnd(e), false);\n        });\n    }\n\n\n    get name() {\n        return this._name;\n    }\n\n\n    handleDragStart(e) {\n        e.target.style.opacity = '0.5';\n        this.dragSrcEl = e.target;\n\n        e.dataTransfer.effectAllowed = 'move';\n        e.dataTransfer.setData('text/html', e.target.innerHTML);\n    }\n\n\n    handleDragOver(e) {\n        if (e.preventDefault) {\n            e.preventDefault();\n        }\n\n        e.dataTransfer.dropEffect = 'move';\n\n        return false;\n    }\n\n\n    handleDragEnter(e) {\n        if (!this.dragSrcEl || !e.target || this.dragSrcEl === e.target) {\n            return;\n        }\n\n        // current hover target\n        if (this._canDrop(this.dragSrcEl, e.target)) {\n            e.target.classList.add('swapper--over');\n        }\n    }\n\n\n    handleDragLeave(e) {\n        // previous target element\n        e.target.classList.remove('swapper--over');\n    }\n\n\n    handleDrop(e) {\n        if (e.stopPropagation) {\n            e.stopPropagation(); // stops the browser from redirecting.\n        }\n\n        // Don't do anything if dropping the same elements we're dragging.\n        if (this._canDrop(this.dragSrcEl, e.target)) {\n            // Set the source column's HTML to the HTML of the column we dropped on.\n            this.dragSrcEl.innerHTML = e.target.innerHTML;\n            e.target.innerHTML = e.dataTransfer.getData('text/html');\n\n            // Swap classes\n            let oldClasses = e.target.classList.toString().split(' ');\n\n            e.target.classList = this.dragSrcEl.classList;\n\n            this.dragSrcEl.classList = '';\n            oldClasses.forEach((o) => {\n                this.dragSrcEl.classList.add(o);\n            });\n\n            // Swap IDs\n            let oldId = e.target.id;\n\n            e.target.id = this.dragSrcEl.id;\n            this.dragSrcEl.id = oldId;\n\n            // Callback when it's done\n            if (this.config.onChange) {\n                this.config.onChange(this.boxes);\n            }\n        }\n\n        return false;\n    }\n\n\n    handleDragEnd(e) {\n        [].forEach.call(this.boxes, function (col) {\n            col.classList.remove('swapper--over');\n            e.target.style.opacity = '1.0';\n        });\n    }\n\n\n    //\n    // Find all the elements inside all containers\n    //\n    _findElementsInThePage() {\n        let selector = '';\n\n        this.config.containers.forEach((c) => {\n            selector += c + ' ' + this.config.element + ',';\n        });\n        selector = selector.slice(0, -1);\n\n        this.boxes = document.querySelectorAll(selector);\n    }\n\n\n    //\n    // Enable drag\n    //\n    enable() {\n        this.isEnabled = true;\n        [].forEach.call(this.boxes, (box) => {\n            box.setAttribute('draggable', true);\n            box.style.cursor = 'move';\n        });\n    }\n\n\n    //\n    // Disable drag\n    //\n    disable() {\n        this.isEnabled = false;\n        [].forEach.call(this.boxes, (box) => {\n            box.removeAttribute('draggable');\n            box.style.cursor = 'default';\n        });\n    }\n\n\n    //\n    // Find the container of the element\n    //\n    _findContainer(element) {\n        let container = null;\n\n        this.config.containers.every((c) => {\n            container = element.closest(c);\n            return !container; // when false exit from loop\n        });\n\n        return container;\n    }\n\n\n    //\n    // Check if the two elements are not the same\n    //\n    _areDifferentElements(el1, el2) {\n        return el1 && el2 && el1 !== el2;\n    }\n\n\n    //\n    // Check if the two elements are in the same container\n    //\n    _hasSameContainers(el1, el2) {\n        let c1 = this._findContainer(el1);\n        let c2 = this._findContainer(el2);\n\n        return (c1 && c2 && c1.innerHTML === c2.innerHTML);\n    }\n\n\n    //\n    // Check if can swap elements\n    //\n    _canDrop(el1, el2) {\n        if (!el1 || !el2) {\n            return false;\n        }\n        if (!this._areDifferentElements(el1, el2)) {\n            return false;\n        }\n        if (!this.config.swapBetweenContainers && !this._hasSameContainers(el1, el2)) {\n            return false;\n        }\n        return true;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}